# üìò RAG‚Äë—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

## üîé –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –ø–æ—Å—Ç—Ä–æ–∏—Ç—å **retrieval‚Äëpipeline**, –∫–æ—Ç–æ—Ä—ã–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ (`q_id`) –∏–∑ –Ω–∞–±–æ—Ä–∞ `questions_clean.csv` –Ω–∞—Ö–æ–¥–∏—Ç —Ç–æ–ø‚Äë5 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (`web_id`) –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π `websites.csv`.  
–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —Ñ–∞–π–ª `submit.csv`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç—Å—è –º–µ—Ç—Ä–∏–∫–æ–π **Hit@5** (–¥–æ–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `web_id` –ø–æ–ø–∞–ª –≤ —Ç–æ–ø‚Äë5).

---

## üìÇ –î–∞–Ω–Ω—ã–µ
- **`websites.csv`**
  - `web_id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã  
  - `url`, `title`, `text` ‚Äî —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã  
- **`questions_clean.csv`**
  - `q_id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–∞  
  - `query` ‚Äî —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞  
- **`submit.csv` (—Ä–µ–∑—É–ª—å—Ç–∞—Ç)**
  - `q_id`  
  - `web_id_1 ‚Ä¶ web_id_5` ‚Äî —Ç–æ–ø‚Äë5 –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü  

---

## ‚öôÔ∏è –ü–∞–π–ø–ª–∞–π–Ω
1. **–ß–∞–Ω–∫–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤**  
   - –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`text`) —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —á–∞–Ω–∫–∏ –ø–æ ~300 —Å–ª–æ–≤ —Å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º 50 —Å–ª–æ–≤.  
   - –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–ª–∏–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã.  

2. **–û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞**  
   - –£–¥–∞–ª–µ–Ω–∏–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤, –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–±–µ–ª–æ–≤.  

3. **TF‚ÄëIDF –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**  
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `TfidfVectorizer` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:  
     - `max_features=20000`  
     - `ngram_range=(1,2)` (—É–Ω–∏–≥—Ä–∞–º–º—ã –∏ –±–∏–≥—Ä–∞–º–º—ã)  
     - `max_df=0.95` (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ —Å–ª–æ–≤–∞)  
   - –ü–æ–ª—É—á–∞–µ–º –º–∞—Ç—Ä–∏—Ü—É –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –¥–ª—è —á–∞–Ω–∫–æ–≤ –∏ –≤–æ–ø—Ä–æ—Å–æ–≤.  

4. **FAISS‚Äë–∏–Ω–¥–µ–∫—Å**  
   - –í–µ–∫—Ç–æ—Ä—ã –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ `float32` –∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è (`faiss.normalize_L2`).  
   - –°—Ç—Ä–æ–∏—Ç—Å—è –∏–Ω–¥–µ–∫—Å `IndexFlatIP` –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–º—É —Å—Ö–æ–¥—Å—Ç–≤—É.  

5. **–ü–æ–∏—Å–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤**  
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –∏—â–µ–º —Ç–æ–ø‚Äë20 –±–ª–∏–∂–∞–π—à–∏—Ö —á–∞–Ω–∫–æ–≤.  
   - –ò–∑ –Ω–∏—Ö –∏–∑–≤–ª–µ–∫–∞–µ–º `web_id`, —É–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã, –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ø‚Äë5.  

6. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ `submit.csv`**  
   - –§–æ—Ä–º–∞—Ç —Å—Ç—Ä–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç `sample_submission.csv`.  
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤.  
   - –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ –º–µ–Ω—å—à–µ 5 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ‚Üí –¥–æ–ø–æ–ª–Ω—è–µ–º –ø—É—Å—Ç—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏.  

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü: ~1900  
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤: –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç—ã—Å—è—á (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–ª–∏–Ω—ã —Ç–µ–∫—Å—Ç–æ–≤)  
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤: ~7000  
- –í —Å—Ä–µ–¥–Ω–µ–º –Ω–∞ –≤–æ–ø—Ä–æ—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –¥–æ 5 –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ (`web_id`).  
- –í `submit.csv` –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ `q_id` –∏ –¥–æ 5 –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö `web_id`.  

---

## üß© –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **–§–∞–π–ª `submit.csv`** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏.  
- **–ö–æ–¥ –ø–∞–π–ø–ª–∞–π–Ω–∞** ‚Äî –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π:  
  - —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ,  
  - —á–∞–Ω–∫–∏—Ç —Ç–µ–∫—Å—Ç—ã,  
  - —Å—Ç—Ä–æ–∏—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥–∏,  
  - –∏—â–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã,  
  - —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `submit.csv`.  

---

## üöÄ –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏
- **Prompt engineering**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ (LLM), –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤.  
- **–£–ª—É—á—à–µ–Ω–∏–µ —Ä–µ—Ç—Ä–∏–≤–µ—Ä–∞**:  
  - –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (Sentence Transformers, fastText),  
  - –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∫—É –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤,  
  - —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–º–µ—Ä–æ–º —á–∞–Ω–∫–æ–≤ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ TF‚ÄëIDF.  

---

## üìå –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å
```bash
python rag_pipeline.py
